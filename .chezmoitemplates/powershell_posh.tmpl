{{ if eq .chezmoi.os "windows" }}
[System.Environment]::SetEnvironmentVariable('Path', $env:Path + ";{{.chezmoi.homeDir}}\.local\bin", [System.EnvironmentVariableTarget]::Process);

Import-Module PSReadLine
{{ end -}}
oh-my-posh init pwsh --config ~/.config/oh-my-posh.yaml | Invoke-Expression

Enable-PoshTransientPrompt
Enable-PoshLineError
{{ if eq .chezmoi.os "darwin" -}}
Add-Content -Path $PROFILE.CurrentUserAllHosts -Value '$(/opt/homebrew/bin/brew shellenv) | Invoke-Expression'
{{ end -}}
{{ if eq .chezmoi.os "windows" }}
function Set-Just {
    [CmdletBinding()]
    param (
        $Param
    )

    just --justfile $HOME/.config/justfile $Param
}

Set-Alias -Name j -Value Set-Just
{{ if lookPath "choco" }}
$ChocolateyProfile = "$env:ChocolateyInstall\helpers\chocolateyProfile.psm1"
if (Test-Path($ChocolateyProfile)) {
  Import-Module "$ChocolateyProfile"
}
{{ end }}
{{- end -}}
